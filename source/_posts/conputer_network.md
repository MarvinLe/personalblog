---
title: 计算机网络分层
date: 2018-11-04 14:03
comments: true
tags:
- 网络分层
- 计网
categories:
- 计算机基础
---

## 分层思想  

> “Any problem  in computer science can be solved by anther layer of indirection.“

”计算机科学领域的任何问题都可以通过增加一个中间层来解决“  

这句话几乎概括了计算机系统软件的设计要点-分层。分层不仅可以将系统的复杂度分解到不同的层去以降低复杂
度,而且可以解耦系统，每一层的实现相互独立，层与层之间通过接口通信。

平时我们开发应用程序是使用语言的Runtime、类库,类库的实现基本上依赖于操作系统的系统调用，而系统调用就
是我们和内核通信的接口。

OS是这样，计算机网络分层就更加明显了。

## 网络协议分层

> 每一次回车qq消息是怎么发给对方的呢？我们都知道这要依靠互联网，而互联网的实现是分层的，用户能够
> 只会感觉到他的消息通过qq发送到了对方qq里，而不会去关注中途ip包怎么路由、丢包怎么办这样底层的
> 问题，这就是分层的好处。分层方式一般有五层模型和OSI七层模型。

### 五层模型

在五层模型里，每一层都定义了不同的多种协议(protocol)，协议规定了该层需要完成的功能以及如何数据
怎么封装。这些协议就组成了TCP/IP协议栈，学习计网就是学习这些协议为什么要这样制定？它解决了什么问
题？有什么缺陷？而不是仅仅去记住封装包的格式和字段含义。

![](https://ws3.sinaimg.cn/large/006tNbRwly1fwzm90dh3yj31920qoai3.jpg)

自底向上的学习互联网协议我觉得更为合适，明白了底层再学习上一层心里就会特别的清晰、踏实。

#### 物理层:

1. 两台主机要通信，最终肯定是要相互连接起来的，连接就需要一些传输信号的介质，常见的有屏蔽/非屏蔽
双绞线、光纤、无线电波等。而物理层的协议就是主要规定一些与传输介质相关的电气特性。所有的数据在这
一层都没有意义，就是单纯的高低电频这样代表0、1的信号

1.  常用的术语:
    * 信号
    * 码元
    * 单工、半双工、全双工
    * 奈式准则、香农法则
    * 基带信号
    * 带通
    * 比特率
    * 波特率
    * 信道复用、信道分用

#### 链接层:

物理层上传送的单个0和1没有任何意义，必须将bit位分组，并规定多少个bit为一组，分组在以太网就叫做
帧(Frame)，一个帧包括头部(Head)和数据(Data)，Head是存放一些数据包的源地址和目的地址还有一些
标志位。Data是存放来自上层协议的数据，一个以太网基本帧64-1518个字节，头部一般为18个字节，所以
数据区一般不超过1500个字节，这也叫做MTU(最大传输单元)。但是这不是绝对的，有不同版本的以太网帧

![基本以太网帧](https://ws3.sinaimg.cn/large/006tNbRwly1fwzn6hmohvj30ct01sq32.jpg)
  
上图中的目标地址和源地址指的就是MAC地址  

> MAC地址：每一个接入网络的设备都有至少一个网卡，网卡上固化有MAC地址，这是每块网卡出厂的时候被
> 固化到上面硬件上的一个独一无二的42个bit的编码。这个地址和IP地址相互配合才能完成跨网段通
> 信

#### 网络层:
 
只有MAC地址是不够的，一个子网是无法容纳全世界这么多主机的。所以需要组成网络的网络，而跨网段的通信
是没有办法通过MAC地址来寻址的。所以我们又定义了一个IP地址，IP地址是层级的。

路由:  

ARP协议:IP层通过IP地址将不同子网连通，但是如何将到达某个子网的数据包转化为子网  
内的MAC地址。还是通过广播的方式进行  

#### 传输层:  

网络层将不同主机之间连接起来，但是主机上的不用应用程序的不同进程需要通信，就需要  
支持主机间多个进程的通信。故采用多路复用的方法建立端到端(port)的通信。  

#### 应用层: 
定义应用程序之间如何交互信息

* 公开的协议如HTTP、SMTP等
* 自定义私有协议  


### OSI七层模型

