---
title: 计算机网络分层
date: 2018-11-04 14:03
comments: true
tags:
- 网络分层
- 计网
categories:
- 计算机基础
---

## 分层思想  

> “Any problem  in computer science can be solved by anther layer of indirection.“

”计算机科学领域的任何问题都可以通过增加一个中间层来解决“  

这句话几乎概括了计算机系统软件的设计要点-分层。分层不仅可以将系统的复杂度分解到不同的层去以降低复杂
度,而且可以解耦系统，每一层的实现相互独立，层与层之间通过接口通信。

平时我们开发应用程序是使用语言的Runtime、类库,类库的实现基本上依赖于操作系统的系统调用，而系统调用就
是我们和内核通信的接口。

OS是这样，计算机网络分层就更加明显了。

## 网络协议分层

> 每一次回车qq消息是怎么发给对方的呢？我们都知道这要依靠互联网，而互联网的实现是分层的，用户能够
> 用户只会感觉到他的消息通过qq发送到了对方qq里，而不会去关注中途ip包怎么路由、丢包怎么办这样底
> 层的问题，这就是分层的好处。分层方式一般有五层模型和OSI七层模型。我觉得还是自底向上学习互联网比
> 较合适。

### 五层模型

在五层模型里，每一层都定义了不同的多种协议(protocol)，协议规定了该层需要完成的功能以及如何数据
怎么封装。这些协议就组成了TCP/IP协议栈，学习计网就是学习这些协议为什么要这样制定？它解决了什么问
题？有什么缺陷？而不是仅仅去记住封装包的格式和字段含义。

![](https://ws3.sinaimg.cn/large/006tNbRwly1fwzm90dh3yj31920qoai3.jpg)


#### 应用层: 
* 公开的协议如HTTP、SMTP等
* 自定义私有协议  

#### 传输层:  

网络层将不同主机之间连接起来，但是主机上的不用应用程序的不同进程需要通信，就需要  
支持主机间多个进程的通信。故采用多路复用的方法建立端到端(port)的通信。  

#### 网络层:
 
只有是不够的，一个子网无法容纳这么大的主机，并且由于连接层是采用  
广播的方式进行传送的，当一个网络中的主机太多时就会导致网络中充满了广播的流量，  
降低网络传送效率  

路由:  

ARP协议:IP层通过IP地址将不同子网连通，但是如何将到达某个子网的数据包转化为子网  
内的MAC地址。还是通过广播的方式进行  

#### 链接层:

物理层上传送的单个0和1没有任何意义，必须将bit位分组，并规定多少个bit为一组，  
每个信号有什么含义。

以太网协议(Ethernet)：规定一组电信号组成一个数据包叫做帧(Frame)，每一帧包  
括Head和Data，Head是存放一些数据包的源地址和目的地址还有一些标志位和校验和等。
总共18

MAC地址：每一个接入网络的设备都有一个网卡，网卡上固化有MAC地址，这是每块网卡出  
厂的时候被固化到上面硬件上的一个独一无二的42个bit的地址

同一子网广播：

#### 物理层:

将主机之间通过物理手段连接起来，并规定了网络的一些电气特性，负责传送0和1

### OSI七层模型

